---
driver:
  name: ec2
  # aws_ssh_key_id: <%= ENV['SAF_AWS_SSH_KEY_ID'] %>
  # user_data: ./user_data.sh
  tags:
    POC: 'SAF Github Actions'
  # security_group_ids: <%= ENV['SAF_AWS_SG_ID'] %>
  #region: <%= ENV['SAF_AWS_REGION'] %>
  # subnet_id: <%= ENV['SAF_AWS_SUBNET_ID'] %>
  instance_type: t2.large
  associate_public_ip: true

verifier:
  input_files:
    - ec2.inputs.yml
  reporter:
    - cli
    - json:spec/results/ec2_ubuntu-2004_%{suite}.json

lifecycle:
  pre_converge:
    - remote: |
        echo "prepping apt-get to install dependencies"
        sudo apt-get -f install
        sudo apt-get update -y
        sudo apt-get dist-upgrade -y
        echo "installing pip3"
        sudo apt-get install python3-pip -y
transport:
  name: ssh
  # username: <%= ENV['SAF_AWS_EC2_USER'] %>
  # ssh_key: <%= ENV['SAF_AWS_EC2_SSH_KEY'] %>
  connection_timeout: 10
  connection_retries: 5
